{{#page-title name="SSH keys"}}
  <button {{action "showForm"}} disabled={{isAdding}}
    class='btn {{if isAdding "btn-default" "btn-primary"}} new-pubkey'>
      {{fa-icon "plus"}} Add SSH key
  </button>
{{/page-title}}

{{#unless hasKeys}}
  <div class="bg-teal-lightest border-t-4 border-teal rounded-b text-teal-darkest px-4 py-3 shadow-md my-10" role="alert">
    <div class="flex">
      <div class="py-1"><svg class="fill-current h-6 w-6 text-teal mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
      <div>
        <p class="font-bold">Front end builds uses SSH keys</p>
        <p class="text-sm">
          You need to add a SSH Key to control which machines can
          deploy new builds. To get started we'll need to first add
          an SSH key.
        </p>
      </div>
    </div>
  </div>
{{/unless}}


{{#liquid-if (or isAdding (not hasKeys)) class="animate-sliding-drawer"}}
  <div class="well">
    {{new-pubkey-form dismiss=(action "hideForm") showCancel=hasKeys}}
  </div>
{{/liquid-if}}

<div class="Panel">

  <div class="Panel-head">
    Active public keys
  </div>

  <div class="Panel-content">
    <p>
      SSH keys are used to grant deployment access. Simply add your SSH
      public key here to start deploying.
    </p>

    {{pubkey-table
      pubkeys=displayableKeys
      removeAction=(action "startDeletingPubkey")}}
  </div>
</div>

{{#if isDeletingPubkey}}
  {{delete-pubkey-modal pubkey=pubkey dismiss=(action 'stopDeletingPubkey')}}
{{/if}}
